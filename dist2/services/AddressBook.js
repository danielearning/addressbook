(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var service=angular.module("addressBookServices",["addressBookUtils"]);service.factory("AddressBook",["$window","EmailValidator","CountryValidator","Cypher",function(e,r,a,t){function n(){e.localStorage&&e.localStorage.addressBookEntries||(e.localStorage||(e.localStorage={}),o({}))}function i(){var r=t&&t.available()?t.decrypt:function(e){return e};return JSON.parse(r(e.localStorage.addressBookEntries))}function o(r){var a=t&&t.available()?t.encrypt:function(e){return e};e.localStorage.addressBookEntries=a(JSON.stringify(r))}function d(e){return e&&e.firstname&&e.lastname&&e.countrycode&&e.email?r&&!r.validate(e.email)?{err:"Required email has bad format"}:a&&!a.validate(e.countrycode)?{err:"Required country cannot be recognized"}:!0:{err:"Required field is not present"}}function u(e,r){var a=Date.now();if(r[a]){for(var t=1;r[a+t];)t++;a+=t}return a}function c(e,r){var a="string"==typeof e.id?e.id:e.id.id;n();var t=i(),d=t[a];return delete t[a],o(t),r&&r(d),d}return{get:function(e,r){n();var a=i()[e.id];return a&&(a.id=e.id),r&&r(a),a},validate:function(e){return d(e)},save:function l(e,r){if(n(),1!=d(e))return r&&r(!1),!1;var a=i(),t="undefined"!=typeof e.id?e.id:u(e,a),l={firstname:""+e.firstname,lastname:""+e.lastname,email:""+e.email,countrycode:""+e.countrycode};return a[t]=l,o(a),l.id=t,r&&r(l),l},query:function(e){n();var r=[],a=i();for(var t in a){var o=a[t];o.id=t,r.push(o)}return e&&e(r),r},remove:c,"delete":c,clearDb:function(){o({})}}}]);

},{}]},{},[1])


//# sourceMappingURL=AddressBook.js.map
